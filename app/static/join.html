<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Baby Club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial; max-width: 420px; margin: 40px auto; }
    input, select, button {
      width: 100%; padding: 12px; margin-top: 12px; font-size: 16px;
      box-sizing: border-box;
    }
    button { background:#ff7aa8; color:white; border:none; border-radius:8px; }
    .section-title { margin-top: 18px; font-weight: 700; }
    .checks { margin-top: 8px; }
    .check-row {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 12px; margin-top: 10px;
      border: 1px solid #eee; border-radius: 10px;
    }
    .check-row input { width: auto; margin: 0; }
    .muted { color:#666; font-size: 13px; margin-top: 8px; }
  </style>
</head>
<body>

<h2>Unite a nuestra comunidad üéÅ</h2>
<p>Recib√≠ promociones especiales y regalos</p>

<form id="form">
  <input placeholder="Tu Nombre" name="name" required />

  <input placeholder="Ingres√° tu email (ejemplo@gmail.com)" name="email" type="email" required />

  <div class="section-title">¬øQu√© te interesa?</div>
  <div class="checks">
    <label class="check-row">
      <input type="checkbox" name="interests" value="baby_items" />
      Art√≠culos para beb√©
    </label>
    <label class="check-row">
      <input type="checkbox" name="interests" value="toys" />
      Juguetes
    </label>
    <label class="check-row">
      <input type="checkbox" name="interests" value="cochesitos" />
      Cochesitos
    </label>
    <label class="check-row">
      <input type="checkbox" name="interests" value="cunas" />
      Cunas
    </label>
  </div>

  <p class="muted">Pod√©s elegir m√°s de una opci√≥n.</p>

  <button>Unite</button>
</form>

<p id="msg"></p>

<script>
const form = document.getElementById("form");
const msg = document.getElementById("msg");

form.onsubmit = async (e) => {
  e.preventDefault();

  const fd = new FormData(form);

  const name = (fd.get("name") || "").toString().trim();
  const email = (fd.get("email") || "").toString().trim();

  // collect multiple checkbox values
  const interests = fd.getAll("interests").map(v => v.toString());

  const payload = {
    name,
    email,
    interests,
    consent_promotions: true
  };

  const res = await fetch("/signup", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  if (res.ok) {
    msg.innerText = "¬°Ya sos parte! üéâ";
    form.reset();
  } else {
    const text = await res.text();
    msg.innerText = `Ocurri√≥ un error. Prob√° nuevamente. (${res.status})`;
    // If you want more debug:
    // msg.innerText = `Error (${res.status}): ${text}`;
  }
};
</script>

</body>
</html>